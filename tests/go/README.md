# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Go Backend

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã –¥–ª—è Go backend —á–∞—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ Dance Flow.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
tests/go/
‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ mocks/            # –ú–æ–∫–∏ –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ unit/             # Unit —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ integration/      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ e2e/              # End-to-end —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ separate/         # –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (–æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å)
‚îú‚îÄ‚îÄ tmp/              # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ run_tests.sh      # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ fix_imports.sh    # –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤
‚îî‚îÄ‚îÄ README.md         # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
./run_tests.sh
```

### –ó–∞–ø—É—Å–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ç–µ—Å—Ç–æ–≤

```bash
./run_tests.sh unit           # –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
./run_tests.sh integration    # –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
./run_tests.sh e2e            # –¢–æ–ª—å–∫–æ E2E —Ç–µ—Å—Ç—ã
./run_tests.sh performance    # –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

### –ó–∞–ø—É—Å–∫ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏

```bash
./run_tests.sh unit -v -c     # Unit —Ç–µ—Å—Ç—ã —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ–º
./run_tests.sh all -r         # –í—Å–µ —Ç–µ—Å—Ç—ã —Å –¥–µ—Ç–µ–∫—Ü–∏–µ–π –≥–æ–Ω–æ–∫
./run_tests.sh integration -b # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –±–µ–Ω—á–º–∞—Ä–∫–∞–º–∏
```

## üß™ –ü—Ä—è–º—ã–µ –∫–æ–º–∞–Ω–¥—ã Go

–ü–æ—Å–∫–æ–ª—å–∫—É –º–æ–¥—É–ª—å —Ä–∞–∑–±–∏—Ç –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —á–∞—Å—Ç–∏, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã Go:

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã (–≤ –≥–ª–∞–≤–Ω–æ–º –º–æ–¥—É–ª–µ)

```bash
# –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã
cd tests/go && go test ./...

# Unit –∏ E2E —Ç–µ—Å—Ç—ã
cd tests/go && go test ./unit ./e2e -v

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã 
cd tests/go && go test ./unit -v

# –¢–æ–ª—å–∫–æ E2E —Ç–µ—Å—Ç—ã
cd tests/go && go test ./e2e -v

# Integration —Ç–µ—Å—Ç—ã (—Ç–æ–ª—å–∫–æ CRUD, –±–µ–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
cd tests/go && go test ./integration -v -run "^TestUserCRUD|^TestProjectCRUD"

# Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
cd tests/go && go test ./integration -v -run "TestAPIPerformance"
```

### –û—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å (separate)

```bash
# –¢–µ—Å—Ç—ã –∏–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è (—Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
cd tests/go/separate && go mod tidy && go test -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
cd tests/go/separate && go test -v -run "TestSpecialOperations"

# –¢–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤  
cd tests/go/separate && go test -v -run "TestProjectController"
```

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
cd tests/go && go test ./unit ./e2e -v && go test ./integration -v -run "^TestUserCRUD|^TestProjectCRUD" && cd separate && go test -v
```

### –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞

```bash
# Unit —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
cd tests/go && go test ./unit -v -cover

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –æ—Ç—á–µ—Ç–∞
cd tests/go && go test ./unit -coverprofile=coverage.out && go tool cover -html=coverage.out -o coverage.html
```

### –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
cd tests/go && go test ./unit -v -run "TestAuthService_Register"

# –° –¥–µ—Ç–µ–∫—Ü–∏–µ–π –≥–æ–Ω–æ–∫
cd tests/go && go test ./unit -race -v

# –° —Ç–∞–π–º–∞—É—Ç–æ–º
cd tests/go && go test ./unit -timeout 30s -v

# –ö–æ—Ä–æ—Ç–∫–∏–µ —Ç–µ—Å—Ç—ã (–ø—Ä–æ–ø—É—Å–∫ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö)
cd tests/go && go test ./unit -short -v
```

### –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–û—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å**: –ö–∞—Ç–∞–ª–æ–≥ `separate/` –∏–º–µ–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `go.mod` –∏ –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- **Integration —Ç–µ—Å—Ç—ã**: –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ API —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ `http://localhost:5000`
  - –ï—Å–ª–∏ API –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –ø–∞–¥–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `./run_tests.sh unit e2e separate` —á—Ç–æ–±—ã –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å integration —Ç–µ—Å—Ç—ã
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: Integration —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ MongoDB –Ω–∞ `mongodb://localhost:27017`
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üìã –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã (`unit/`)

–¢–µ—Å—Ç–∏—Ä—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∏–∑–æ–ª—è—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–∫–æ–≤.

**–ü—Ä–∏–º–µ—Ä—ã:**
- `auth_service_test.go` - –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –¢–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, —Å–µ—Ä–≤–∏—Å–æ–≤, —É—Ç–∏–ª–∏—Ç

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–∫–∏ –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ë—ã—Å—Ç—Ä–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
- –ù–µ —Ç—Ä–µ–±—É—é—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (`integration/`)

–¢–µ—Å—Ç–∏—Ä—É—é—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

**–ü—Ä–∏–º–µ—Ä—ã:**
- `database_test.go` - –¢–µ—Å—Ç—ã —Ä–∞–±–æ—Ç—ã —Å MongoDB
- `performance_test.go` - –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∞–ª—å–Ω—É—é —Ç–µ—Å—Ç–æ–≤—É—é –ë–î
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –¢—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### E2E —Ç–µ—Å—Ç—ã (`e2e/`)

–¢–µ—Å—Ç–∏—Ä—É—é—Ç –ø–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —á–µ—Ä–µ–∑ API.

**–ü—Ä–∏–º–µ—Ä—ã:**
- `api_test.go` - –ü–æ–ª–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã —Å API

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢–µ—Å—Ç–∏—Ä—É—é—Ç –≤–µ—Å—å —Å—Ç–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (`separate/`)

–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ.

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|----------|--------------|
| `MONGO_TEST_URI` | URI –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π MongoDB | `mongodb://localhost:27017` |
| `TEST_API_URL` | URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API | `http://localhost:5000` |
| `RUN_PERFORMANCE_TESTS` | –í–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ | `false` |
| `TEST_TIMEOUT` | –¢–∞–π–º–∞—É—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤ | `10m` |
| `TEST_ENV` | –°—Ä–µ–¥–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | `test` |

### –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
export MONGO_TEST_URI="mongodb://localhost:27017"
export TEST_API_URL="http://localhost:5000"
export RUN_PERFORMANCE_TESTS="true"
./run_tests.sh
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

### –ú–æ–∫–∏ (`mocks/`)

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–æ–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```go
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–∫–∞
func TestSomeFunction(t *testing.T) {
    mockRepo := mocks.NewMockUserRepository()
    mockRepo.On("FindByID", "123").Return(user, nil)
    
    service := NewService(mockRepo)
    result, err := service.GetUser("123")
    
    assert.NoError(t, err)
    mockRepo.AssertExpectations(t)
}
```

### –£—Ç–∏–ª–∏—Ç—ã (`utils/`)

–û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:

```go
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user := utils.CreateTestUser("test")

// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
client, db, err := utils.SetupTestMongoDB(uri, dbName)

// –°–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
req, err := utils.CreateAuthenticatedRequest("GET", url, nil, token)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config/`)

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

```go
cfg := config.NewTestConfig()
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –ø–æ–∫—Ä—ã—Ç–∏—è

```bash
./run_tests.sh all -c
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- `coverage.out` - –¥–∞–Ω–Ω—ã–µ –ø–æ–∫—Ä—ã—Ç–∏—è
- `coverage.html` - HTML –æ—Ç—á–µ—Ç

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞

```bash
open coverage.html
```

## üèÉ‚Äç‚ôÇÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
export RUN_PERFORMANCE_TESTS=true
./run_tests.sh performance
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```bash
export PERF_NUM_REQUESTS=200      # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
export PERF_NUM_USERS=20          # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
export PERF_MAX_RESPONSE_TIME=500ms # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
```

### –ë–µ–Ω—á–º–∞—Ä–∫–∏

```bash
./run_tests.sh integration -b
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ unit —Ç–µ—Å—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `unit/` —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º `_test.go`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ table-driven —Ç–µ—Å—Ç—ã:

```go
func TestSomeFunction(t *testing.T) {
    tests := []struct {
        name     string
        input    string
        expected string
        wantErr  bool
    }{
        {"–£—Å–ø–µ—à–Ω—ã–π —Å–ª—É—á–∞–π", "input", "output", false},
        {"–û—à–∏–±–∫–∞", "bad", "", true},
    }
    
    for _, tt := range tests {
        t.Run(tt.name, func(t *testing.T) {
            result, err := SomeFunction(tt.input)
            
            if tt.wantErr {
                require.Error(t, err)
            } else {
                require.NoError(t, err)
                assert.Equal(t, tt.expected, result)
            }
        })
    }
}
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–æ–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `mocks/` —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º:

```go
package mocks

import "github.com/stretchr/testify/mock"

type MockService struct {
    mock.Mock
}

func (m *MockService) SomeMethod(param string) (string, error) {
    args := m.Called(param)
    return args.String(0), args.Error(1)
}

func NewMockService() *MockService {
    return &MockService{}
}
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ó–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```bash
go test -v ./unit -run TestSpecificFunction
```

### –î–µ—Ç–µ–∫—Ü–∏—è –≥–æ–Ω–æ–∫

```bash
./run_tests.sh unit -r
```

### –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥

```bash
./run_tests.sh unit -v
```

## ‚úÖ Best Practices

1. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
2. **Table-driven —Ç–µ—Å—Ç—ã**: –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ —Ç–∞–±–ª–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
3. **–ú–æ–∫–∏**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `AssertExpectations(t)` –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–∫–æ–≤
4. **Cleanup**: –û—á–∏—â–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –≤ `defer` –∏–ª–∏ `t.Cleanup()`
5. **–ò–∑–æ–ª—è—Ü–∏—è**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
6. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**: –ü–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### MongoDB –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

```bash
# –ó–∞–ø—É—Å–∫ MongoDB —á–µ—Ä–µ–∑ Docker
docker run -d -p 27017:27017 mongo:latest
```

### –ü–æ—Ä—Ç API –∑–∞–Ω—è—Ç

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
export TEST_API_URL="http://localhost:8080"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –º–æ–¥—É–ª—è–º–∏

```bash
go mod tidy
go mod download
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç –º–µ—Ç—Ä–∏–∫–∏:
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ª–æ–≥ —Ñ–∞–π–ª—ã –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å CI/CD —Å–∏—Å—Ç–µ–º–∞–º–∏.

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ API

–ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ –∑–∞–ø—É—â–µ–Ω API —Å–µ—Ä–≤–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
# –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏—Ö API
./run_tests.sh unit
./run_tests.sh e2e  
./run_tests.sh separate

# –ò–ª–∏ –≤—Å–µ —Å—Ä–∞–∑—É –±–µ–∑ integration —Ç–µ—Å—Ç–æ–≤ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)
cd tests/go && go test ./unit/... ./e2e/... && cd separate && go test .
```